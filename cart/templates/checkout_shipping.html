{% extends 'base.html' %}

{% load staticfiles %}


{% block content %}

{% include 'components/progress.html' %}

{% include 'components/summary.html' %}

<div class="container pb-2 push-footer-down">
	<div class="row justify-content-between">
		<div class="col-12 col-md-6 mt-4" id="shipping-options">

			<div class="card bg-light checkout-card">
				<h6 class="checkout-heading">Contact</h6>
				<p>{{user.email}}</p>
				<hr>
				<div class="d-flex justify-content-between">
					<h6 class="checkout-heading">Ship to</h6>
					<a href="{% url 'info' %}">Change</a>
				</div>
				<p>{{ order.full_name }},<br>
                    {{ order.address_line_1 }},<br>
                    {% if order.address_line_2 %}
                    {{ order.address_line_2 }},<br>
                    {% endif %}
                    {{ order.town_or_city }},<br>
                    {% if order.state %}
                    {{ order.state }},<br>
                    {% endif %}
                    {{ order.postcode }},<br>
                    {{ order.country }}</p>
			</div>

			<form method="POST">
				{% csrf_token %}
				<h6 class="checkout-heading mt-4">Shipping method</h6>
				<div class="card bg-light checkout-card mb-3">
					<div class="container-fluid">
						<div class="row justify-content-between">
							<div class="col-8">
								<div class="form-check">
									<input class="form-check-input" type="radio" name="shippingMethodRadios" id="sta"
                                        value="option1" checked>
									<label class="form-check-label" for="sta">
                                        Standard Shipping
                                    </label>
								</div>
							</div>
							<div class="col-4 text-right">
								${{ order.country.shipping_price }}
							</div>
						</div>
					</div>
				</div>

				<button id="submit-payment-btn" class="btn btn-cta btn-blue d-block mx-auto m-lg-0 ml-lg-auto">Continue to payment</button>
			</form>

		</div>

		<div class="container">
			<div class="row">
				<div class="col s12">
					<div class="card-border">
						<div class="card">
							<div class="card-content">
								<h1 class="center-align purple-text text-darken-3 upper">
									Feature Request
								</h1>
								<h2 class="center-align purple-text text-darken-3 upper">
									There is a â‚¬100 fee to make a feature request
								</h2>
								<form id="payment-form" method="post" action="{% url 'new_feature' %}"
									data-token="{{ publishable }}">
									{% csrf_token %}
									<h3 class="purple-text text-darken-3 bold">Payment Details:</h3>
									<!-- stripe element will be inserted in this div -->
									<div class="row">
										<label for="card-element">Credit or Debit card</label>
										<div id="card-element"></div>
										<div id="card-errors" role="alert"></div>
									</div>
									<br><br>
									<button type="submit" class="btn">Submit Payment</button>
									<a href="{% url 'all_tickets' %}" class="btn red">Cancel</a>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- order summary section, visible on medium screens and up -->
		<div id="shopping-cart-contents" class="d-none d-md-block col-md-6 card">

			<div class="row">
				<div class="col-9">
					<h3 class="checkout-heading pb-3 px-3">Your Order Summary</h3>
				</div>
				<div class="col-3 text-right"><a href="{% url 'cart' %}">Change</a></div>
				{% include 'components/orderitem-list.html' %}
			</div>

		</div>

		<div class="col-12 text-center text-md-left p-3">
			<div class="text-center text-md-left my-2">
				<a href="{% url 'info' %}" class="mx-auto blue-link"><i class="fas fa-arrow-left"></i> Return to
					Information</a>
			</div>
		</div>

	</div>
</div>
{% endblock %}
{% block js %}
<!-- Stripe Payment API -->
<script src="https://js.stripe.com/v3/"></script>
<script src="{% static 'js/stripe.js' %}"></script>

{% endblock %}